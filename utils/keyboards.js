// ==================================================
// –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä Telegram.
// –°–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏:
// - getLanguageKeyboard: –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞.
// - getRegionsKeyboard: –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –æ–±–ª–∞—Å—Ç–µ–π –∏ –∫–Ω–æ–ø–∫–æ–π —Å–º–µ–Ω—ã —è–∑—ã–∫–∞.
// ==================================================

const TEXTS = require('../constants/texts');
const REGIONS = require('../constants/regions');

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞.
function getLanguageKeyboard() {
    return {
        reply_markup: {
            keyboard: [[{ text: 'üá∑üá∫ –†—É—Å—Å–∫–∏–π' }], [{ text: 'üáßüáæ –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π' }]],
            resize_keyboard: true // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥–æ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ–¥ —ç–∫—Ä–∞–Ω
        }
    };
}

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–±–ª–∞—Å—Ç–∏.
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ 'awaiting_region'.
// –ü—Ä–∏–Ω–∏–º–∞–µ—Ç chatId, —è–∑—ã–∫, —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) –∏ Map —Å–æ—Å—Ç–æ—è–Ω–∏–π.
function getRegionsKeyboard(chatId, lang, bot, userStates) {
    userStates.set(chatId, 'awaiting_region'); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –æ–±–ª–∞—Å—Ç–∏
    const regions = Object.values(REGIONS).map(r => r[lang]); // –ú–∞—Å—Å–∏–≤ –Ω–∞–∑–≤–∞–Ω–∏–π –æ–±–ª–∞—Å—Ç–µ–π –Ω–∞ –Ω—É–∂–Ω–æ–º —è–∑—ã–∫–µ
    const keyboard = [];
    // –†–∞—Å–ø–æ–ª–∞–≥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ 2 –≤ —Ä—è–¥ –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏
    for (let i = 0; i < regions.length; i += 2) {
        keyboard.push(regions.slice(i, i + 2).map(name => ({ text: name })));
    }
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ –≤–Ω–∏–∑—É
    keyboard.push([{ text: TEXTS[lang].changeLang }]);
    return {
        reply_markup: { keyboard, resize_keyboard: true }
    };
}

module.exports = { getLanguageKeyboard, getRegionsKeyboard };